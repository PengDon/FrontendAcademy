# Web无障碍访问 (Accessibility)

## 基本介绍
无障碍访问是确保网站和应用能够被所有用户访问和使用的实践，包括残障人士（视力障碍、听力障碍、行动障碍、认知障碍等）。前端开发中实现无障碍访问不仅是一种社会责任，也是许多国家和地区的法律要求。

## WCAG 标准

### WCAG 2.1 四大原则
- **可感知性 (Perceivable)**: 信息和用户界面组件必须以可感知的方式呈现
- **可操作性 (Operable)**: 用户界面组件和导航必须是可操作的
- **可理解性 (Understandable)**: 信息和用户界面操作必须是可理解的
- **健壮性 (Robust)**: 内容必须足够健壮，可以被各种用户代理可靠地解释

### 符合级别
- **A 级**: 最低级别，解决最基本的障碍
- **AA 级**: 中等级别，解决大多数障碍（通常被视为合规基准）
- **AAA 级**: 最高级别，解决更复杂的障碍

## HTML 无障碍最佳实践

### 语义化HTML
- 使用正确的HTML元素表示内容类型（`<header>`, `<nav>`, `<main>`, `<article>`, `<section>`, `<footer>`等）
- 避免仅为了样式而使用非语义元素（如`<div>`和`<span>`）替代语义元素

### ARIA 属性
- **角色 (Roles)**: `role="navigation"`, `role="button"`, `role="alert"`等
- **状态 (States)**: `aria-checked`, `aria-disabled`, `aria-expanded`等
- **属性 (Properties)**: `aria-label`, `aria-labelledby`, `aria-describedby`等

### 表单无障碍
- 为所有输入字段提供标签（`<label>`元素）
- 使用`placeholder`时仍需提供标签
- 实现表单验证和错误提示的无障碍描述
- 使用`fieldset`和`legend`对相关表单控件进行分组

## 键盘导航

### 基本要求
- 所有功能必须可通过键盘访问
- 焦点顺序必须是逻辑的、可预测的
- 焦点状态必须可见且一致

### 实现方法
- 使用标准HTML元素（它们通常具有内置的键盘行为）
- 使用适当的`tabindex`属性
- 避免移除元素的焦点轮廓（outline），或提供替代的视觉焦点指示器
- 实现键盘快捷键（使用`accesskey`或自定义JavaScript）

## 色彩无障碍

### 对比度要求
- 正文文本与背景的对比度至少为4.5:1（AA级）或7:1（AAA级）
- 大文本（≥18pt或≥14pt加粗）的对比度至少为3:1（AA级）或4.5:1（AAA级）

### 其他考虑
- 不要仅依赖颜色传达信息
- 提供文本标签或图标作为补充
- 测试不同类型的色盲友好的色彩方案

## 多媒体无障碍

### 图像
- 为图像提供有意义的`alt`文本
- 为复杂图像提供详细描述（使用`aria-describedby`）
- 装饰性图像使用空的alt文本（`alt=""`）

### 视频和音频
- 为预录制视频提供字幕
- 为预录制音频内容提供文本记录
- 考虑提供手语解释或音频描述

## 屏幕阅读器兼容性

### 常见屏幕阅读器
- NVDA（开源，Windows）
- JAWS（商业，Windows）
- VoiceOver（内置，macOS/iOS）
- TalkBack（Android）

### 测试技巧
- 导航结构测试（标题层级、地标导航）
- 表单交互测试
- 动态内容更新通知测试
- 模态对话框可访问性测试

## 动态内容无障碍

### 更新提示
- 使用`aria-live`区域通知动态内容变化
- 设置适当的`aria-live`级别（polite, assertive）

### 模态框
- 实现模态框的焦点陷阱
- 关闭模态框时将焦点返回到触发元素
- 使用`aria-modal="true"`标记模态对话框

## 无障碍测试工具

### 自动化工具
- axe DevTools（Chrome扩展）
- WAVE（Web Accessibility Evaluation Tool）
- Lighthouse（Google Chrome内置）

### 手动测试方法
- 键盘导航测试
- 屏幕阅读器测试
- 色彩对比度检查
- 不同浏览器和设备的兼容性测试

## 无障碍实施流程

1. 设计阶段考虑无障碍需求
2. 开发阶段遵循无障碍最佳实践
3. 测试阶段使用自动化工具和手动测试
4. 生产环境持续监控和改进

## 常见无障碍问题及解决方案

### 问题1: 缺少替代文本
- **解决方案**: 为所有有意义的图像添加描述性alt文本

### 问题2: 不可通过键盘访问的交互元素
- **解决方案**: 确保所有交互元素都可通过键盘访问，并提供明确的焦点指示

### 问题3: 复杂表格缺少适当标记
- **解决方案**: 使用`<th>`元素和`scope`属性，考虑使用`aria-describedby`提供额外说明

### 问题4: 动态更新没有通知
- **解决方案**: 使用`aria-live`区域或其他ARIA属性通知屏幕阅读器用户

## 无障碍法规和标准

### 国际标准
- WCAG 2.1（Web内容无障碍指南）
- Section 508（美国）
- EAA（欧盟无障碍法案）
- AODA（安大略无障碍法案）

### 法律合规性
- 了解所在地区的无障碍法律法规
- 制定符合法规的无障碍政策
- 定期进行合规性评估和改进

## 无障碍资源

### 官方文档
- [WCAG 2.1官方文档](https://www.w3.org/TR/WCAG21/)
- [WebAIM](https://webaim.org/)
- [MDN无障碍指南](https://developer.mozilla.org/zh-CN/docs/Web/Accessibility)

### 在线工具
- [WebAIM对比度检查器](https://webaim.org/resources/contrastchecker/)
- [A11Y项目](https://www.a11yproject.com/)
- [WAVE评估工具](https://wave.webaim.org/)

## 总结
实现良好的无障碍访问不仅可以帮助有特殊需求的用户，也能提高所有用户的体验，同时也符合道德和法律要求。作为前端开发者，我们应该将无障碍设计理念融入到整个开发流程中，不断学习和应用无障碍最佳实践。